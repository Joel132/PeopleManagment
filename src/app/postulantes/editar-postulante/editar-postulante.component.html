<div class="aligner"  *ngIf="formEditarPostulante">
  <form [formGroup] = 'formEditarPostulante' (ngSubmit)="onSubmit()"> 
  <mat-tab-group mat-stretch-tabs >
    <!--inicio pestana 1--> 
    <mat-tab label="Datos Personales">
      
        <!--bloque de la foto-->
        <div class="container" fxLayout="column" fxLayoutWrap fxLayoutGap="0.5%" fxLayoutAlign="center center">
          
          <!-- Sin Foto / Foto cargada-->
          <div *ngIf="!isLoadingFoto">
            <label class="hoverable" for="fileInput">
            <img matTooltip="Cambiar Foto de Perfil" [src]="urlFoto ? urlFoto : 'assets/img/foto-perfil.png'"> 
            <div class="hover-text">Cambiar Foto</div>
            <div class="background"></div>
            </label>
            
            <br>
          </div>

          <!-- Cargando foto-->
          <div *ngIf="isLoadingFoto">
            <mat-spinner></mat-spinner>
          </div>
          <div *ngIf="errorFoto">
            <mat-error style="color: rgb(59, 61, 71);" >
              <p style="text-align: center" *ngIf="!errorFotoPesado">No se ha podido subir la imagen. Error en el servidor</p>
              <p style="text-align: center" *ngIf="errorFotoPesado">El tamaño maximo por imagen es de 10MB</p>
            </mat-error>
          </div>
          <input id="fileInput" type='file' (change)="cargarFoto()" class="inputFile" #fotoInput>  
        </div>
        
        <div fxLayoutAlign="center">
            <button mat-button color="warn" *ngIf="urlFoto" (click)="eliminarFoto()">Eliminar</button>
        </div>

        <!--div gral-->
        <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="5%" fxLayoutAlign="center">
          <!--div bloque 1-->
          <div fxFlex="40%" class="bloque">
            
            <!-- campo del nombre-->
            <mat-form-field>
              <mat-label>Nombre</mat-label>
              <input formControlName = "nombre" matInput placeholder="Nombre" type="text" required>
              <mat-icon matSuffix class="icono">person</mat-icon>
              <mat-error style="color: rgb(59, 61, 71);" *ngIf="formEditarPostulante?.get('nombre').errors && formEditarPostulante?.get('nombre')?.dirty">
                <p *ngIf=" formEditarPostulante?.get('nombre').hasError('required')">Completar campo</p>
                <p *ngIf=" formEditarPostulante?.get('nombre').hasError('pattern')">No se aceptan numeros</p>
              </mat-error>
            </mat-form-field>
            
            <!-- campo del apellido-->
            <mat-form-field>
              <mat-label>Apellido</mat-label>
              <input formControlName = "apellido" matInput placeholder="Apellido" type="text" required>
              <mat-icon matSuffix class="icono">person</mat-icon>
              <mat-error style="color: rgb(59, 61, 71);" *ngIf="formEditarPostulante?.get('nombre').errors && formEditarPostulante?.get('nombre').dirty">
                <p *ngIf=" formEditarPostulante?.get('apellido').hasError('required')">Completar campo</p>
                <p *ngIf=" formEditarPostulante?.get('apellido').hasError('pattern')" [ngStyle]="{'color': 'black'}" align="start">No es un nombre valido</p>
              </mat-error>
            </mat-form-field>
           
            <!-- campo del mail-->
            <mat-form-field>
              <input matInput placeholder="Email" formControlName="mail" required>
              <mat-icon matSuffix class="icono">email</mat-icon>
              <mat-error *ngIf="formEditarPostulante?.invalid">{{getErrorEmailMessage()}}</mat-error>
            </mat-form-field>
           
            <!-- campo de la direccion-->
            <mat-form-field>
              <input formControlName = "direccion" matInput placeholder="Direccion" type="text">
              <mat-icon matSuffix class="icono" >location_on</mat-icon>
            </mat-form-field> 

            <!-- campo del estado-->          
            <mat-form-field>
                <mat-select formControlName = "estado" placeholder="Estado"  disableRipple>
                  <mat-option value="Pendiente Desafio">Desafio Pendiente</mat-option>
                  <mat-option value="Desafío Recibido">Desafío Recibido</mat-option>
                  <mat-option value="Desafío Revisado">Desafío Revisado</mat-option>
                  <mat-option value="Pendiente E. SM">Entrevista Pendiente SM</mat-option>
                  <mat-option value="Pendiente E. Admin">Entrevista Pendiente Admin</mat-option>
                  <mat-option value="Pendiente E. Team">Entrevista PendienteTeam</mat-option>
                  <mat-option value="Aprobado">Aprobado</mat-option>
                  <mat-option value="Rechazado">Rechazado</mat-option>
                </mat-select>
              </mat-form-field>   
              
              <mat-form-field>
                <mat-select formControlName = "estado" placeholder="Sexo"  disableRipple>
                  <mat-option value="masculino">Masculino</mat-option>
                  <mat-option value="femenino">Femenino</mat-option>
                  
                </mat-select>
              </mat-form-field>
          </div>

          <!--sgt bloque 2-->
          <div fxFlex="40%" class="bloque">

            <!-- campo del documento-->
            <mat-form-field>
              <mat-icon matSuffix class="icono">contact_mail</mat-icon>
              <input formControlName = "documento" matInput placeholder="CI" type="text">
            </mat-form-field>
            
            <!-- campo del telefono-->
            <mat-form-field>
              <mat-label>Telefono</mat-label>
              <input formControlName = "celular" matInput placeholder="ej; +595961565376" type="tel"
              ng-minlength="10" ng-maxlength="10"  >
              <mat-icon matSuffix class="icono">call</mat-icon>
            </mat-form-field>
            
            <!-- campo de fecha de nacimiento-->
            <mat-form-field class="Fecha de Nacimiento">
              <input formControlName = "fechaDeNacimiento" matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker" placeholder="Fecha de Nacimiento">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>


            <!--subir cv-->
            <mat-form-field >
              <label for="cvInput"><input matInput placeholder="Subir CV" disabled [value]="cvName"></label>
              <label matPrefix ><mat-icon matTooltip="Descargar archivo"  class="icono">get_app</mat-icon></label>
              <label matSuffix for="cvInput" *ngIf="!isLoadingCV"><mat-icon matTooltip="Subir archivo" class="icono">attach_file</mat-icon></label>
              <label matSuffix *ngIf="isLoadingCV" ><mat-spinner diameter=20></mat-spinner></label>
              <label matSuffix *ngIf="!isLoadingCV&&cvName" (click)="vaciarInputCV()"><mat-icon  matTooltip="Eliminar archivo" class="icono">clear</mat-icon></label>
              <mat-hint *ngIf="errorCV">
                <p *ngIf="!errorCVPesado">No se ha podido subir el archivo. Error en el servidor</p>
                <p *ngIf="errorCVPesado">El tamaño maximo por archivo es de 10MB</p>
              </mat-hint>
            </mat-form-field>
            <input type="file" id="cvInput" class="inputFile"  #curriculumInput (change)="cargarCV()">

            <!--subir desafio-->
            <mat-form-field>
            <input matInput placeholder="Subir Desafio" disabled [value]="desafioName">   
            <label matPrefix ><mat-icon matTooltip="Descargar archivo" class="icono">get_app</mat-icon></label>
            <label matSuffix for="desafioInput" *ngIf="!isLoadingDesafio&&!desafioName"><mat-icon matTooltip="Subir archivo" class="icono">attach_file</mat-icon></label>
            <label matSuffix for="desafioInput" *ngIf="isLoadingDesafio" ><mat-spinner diameter=20></mat-spinner></label>
            <label matSuffix *ngIf="!isLoadingDesafio&&desafioName" (click)="vaciarInputDesafio()"><mat-icon matTooltip="Eliminar archivo" class="icono">clear</mat-icon></label>
            <mat-hint *ngIf="errorDesafio">
                <p *ngIf="!errorDesafioPesado">No se ha podido subir el archivo. Error en el servidor</p>
                <p *ngIf="errorDesafioPesado">El tamaño maximo por archivo es de 10MB</p>
            </mat-hint>
            </mat-form-field>
            <input type="file" id="desafioInput"  class="inputFile" #desafioInput (change)="cargarDesafio()">

          </div>

        </div>    
          <button type="button" mat-stroked-button color="warn" (click)="volverAlListado()">Cancelar</button>
          <button mat-raised-button  type="submit" [disabled]="formEditarPostulante?.invalid">Guardar</button>    
            
     
      <!--fin bloques y form--> 
    </mat-tab>
    <!--fin pestana 1--> 
    
    <!--inicio pestana 2--> 
    <mat-tab label="Comentarios">
    
      <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="0.5%" fxLayoutAlign="center">
        <!--div bloque 1-->
        <div fxFlex="60%" class="bloque" >
            <!--comentario general--> 
            <h4>Comentario General</h4>            
            <mat-form-field appearance="outline" class="example-full-width">
            <textarea matInput formControlName="comentario" placeholder="Comentario General"></textarea>
            </mat-form-field>
        </div>

        <!--div bloque 2-->
        <div fxFlex="50%" class="bloque">
          <!--comentario desafio--> 
          <h4>Comentario de Desafio</h4>
          <mat-form-field appearance="outline" class="example-full-width">
            <textarea matInput formControlName="comentarioDesafio" placeholder="Agregar comentario desafio"></textarea>
          </mat-form-field>

          <!--comentario de entrevistas-->
          <h4>Comentario de Entrevistas</h4>
          
          <!--SM entrevista-->
          <mat-form-field appearance="outline" class="example-full-width">
          <textarea matInput formControlName="comentarioSM" placeholder="Agregar comentario"></textarea>
          </mat-form-field>

          <!--admin entrevista--> 
          <mat-form-field appearance="outline" class="example-full-width">
          <textarea matInput formControlName="comentarioAdmin" placeholder="Agregar comentario"></textarea>
          </mat-form-field>          

          <!--team entrevista-->  
          <mat-form-field appearance="outline" class="example-full-width">
          <textarea matInput  formControlName="comentarioTeam" placeholder="Agregar comentario"></textarea>
          </mat-form-field>

        </div>

      </div>  
      <button type="button" mat-stroked-button color="warn" (click)="volverAlListado()">Cancelar</button>
      <button mat-raised-button  type="submit" [disabled]="formEditarPostulante.invalid">Guardar</button> 
  
    </mat-tab>
    <!--fin pestana 2--> 

    <!--pestana comentarios-->
    <mat-tab label="Aptitudes"> 
    <h4>En desarrollo </h4>
    <button mat-icon-button color="warn" type="button">
      <mat-icon aria-label="Example icon-button with a heart icon">favorite</mat-icon>
    </button>
    </mat-tab>
  </mat-tab-group>
  </form>
</div>

